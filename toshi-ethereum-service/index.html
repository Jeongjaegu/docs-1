<!DOCTYPE html><html><head><meta charset="utf-8"><title>Toshi Ethereum Service</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><style>@import url('https://fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200');.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}.right .hljs-comment{color:#969896}.right .css .hljs-class,.right .css .hljs-id,.right .css .hljs-pseudo,.right .hljs-attribute,.right .hljs-regexp,.right .hljs-tag,.right .hljs-variable,.right .html .hljs-doctype,.right .ruby .hljs-constant,.right .xml .hljs-doctype,.right .xml .hljs-pi,.right .xml .hljs-tag .hljs-title{color:#c66}.right .hljs-built_in,.right .hljs-constant,.right .hljs-literal,.right .hljs-number,.right .hljs-params,.right .hljs-pragma,.right .hljs-preprocessor{color:#de935f}.right .css .hljs-rule .hljs-attribute,.right .ruby .hljs-class .hljs-title{color:#f0c674}.right .hljs-header,.right .hljs-inheritance,.right .hljs-name,.right .hljs-string,.right .hljs-value,.right .ruby .hljs-symbol,.right .xml .hljs-cdata{color:#b5bd68}.right .css .hljs-hexcolor,.right .hljs-title{color:#8abeb7}.right .coffeescript .hljs-title,.right .hljs-function,.right .javascript .hljs-title,.right .perl .hljs-sub,.right .python .hljs-decorator,.right .python .hljs-title,.right .ruby .hljs-function .hljs-title,.right .ruby .hljs-title .hljs-keyword{color:#81a2be}.right .hljs-keyword,.right .javascript .hljs-function{color:#b294bb}.right .hljs{display:block;overflow-x:auto;background:#1d1f21;color:#c5c8c6;padding:.5em;-webkit-text-size-adjust:none}.right .coffeescript .javascript,.right .javascript .xml,.right .tex .hljs-formula,.right .xml .css,.right .xml .hljs-cdata,.right .xml .javascript,.right .xml .vbscript{opacity:.5}body{color:black;background:white;font:400 14px / 1.42 'Roboto',Helvetica,sans-serif}header{border-bottom:1px solid #f2f2f2;margin-bottom:12px}h1,h2,h3,h4,h5{color:black;margin:12px 0}h1 .permalink,h2 .permalink,h3 .permalink,h4 .permalink,h5 .permalink{margin-left:0;opacity:0;transition:opacity .25s ease}h1:hover .permalink,h2:hover .permalink,h3:hover .permalink,h4:hover .permalink,h5:hover .permalink{opacity:1}.triple h1 .permalink,.triple h2 .permalink,.triple h3 .permalink,.triple h4 .permalink,.triple h5 .permalink{opacity:.15}.triple h1:hover .permalink,.triple h2:hover .permalink,.triple h3:hover .permalink,.triple h4:hover .permalink,.triple h5:hover .permalink{opacity:.15}h1{font:200 36px 'Raleway',Helvetica,sans-serif;font-size:36px}h2{font:200 36px 'Raleway',Helvetica,sans-serif;font-size:30px}h3{font-size:100%;text-transform:uppercase}h5{font-size:100%;font-weight:normal}p{margin:0 0 10px}p.choices{line-height:1.6}a{color:#428bca;text-decoration:none}li p{margin:0}hr.split{border:0;height:1px;width:100%;padding-left:6px;margin:12px auto;background-image:linear-gradient(to right, rgba(0,0,0,0) 20%, rgba(0,0,0,0.2) 51.4%, rgba(255,255,255,0.2) 51.4%, rgba(255,255,255,0) 80%)}dl dt{float:left;width:130px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd{margin-left:150px}blockquote{color:rgba(0,0,0,0.5);font-size:15.5px;padding:10px 20px;margin:12px 0;border-left:5px solid #e8e8e8}blockquote p:last-child{margin-bottom:0}pre{background-color:#f5f5f5;padding:12px;border:1px solid #cfcfcf;border-radius:6px;overflow:auto}pre code{color:black;background-color:transparent;padding:0;border:none}code{color:#444;background-color:#f5f5f5;font:'Inconsolata',monospace;padding:1px 4px;border:1px solid #cfcfcf;border-radius:3px}ul,ol{padding-left:2em}table{border-collapse:collapse;border-spacing:0;margin-bottom:12px}table tr:nth-child(2n){background-color:#fafafa}table th,table td{padding:6px 12px;border:1px solid #e6e6e6}.text-muted{opacity:.5}.note,.warning{padding:.3em 1em;margin:1em 0;border-radius:2px;font-size:90%}.note h1,.warning h1,.note h2,.warning h2,.note h3,.warning h3,.note h4,.warning h4,.note h5,.warning h5,.note h6,.warning h6{font-family:200 36px 'Raleway',Helvetica,sans-serif;font-size:135%;font-weight:500}.note p,.warning p{margin:.5em 0}.note{color:black;background-color:#f0f6fb;border-left:4px solid #428bca}.note h1,.note h2,.note h3,.note h4,.note h5,.note h6{color:#428bca}.warning{color:black;background-color:#fbf1f0;border-left:4px solid #c9302c}.warning h1,.warning h2,.warning h3,.warning h4,.warning h5,.warning h6{color:#c9302c}header{margin-top:24px}nav{position:fixed;top:24px;bottom:0;overflow-y:auto}nav .resource-group{padding:0}nav .resource-group .heading{position:relative}nav .resource-group .heading .chevron{position:absolute;top:12px;right:12px;opacity:.5}nav .resource-group .heading a{display:block;color:black;opacity:.7;border-left:2px solid transparent;margin:0}nav .resource-group .heading a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid black}nav ul{list-style-type:none;padding-left:0}nav ul a{display:block;font-size:13px;color:rgba(0,0,0,0.7);padding:8px 12px;border-top:1px solid #d9d9d9;border-left:2px solid transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}nav ul a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid black}nav ul>li{margin:0}nav ul>li:first-child{margin-top:-12px}nav ul>li:last-child{margin-bottom:-12px}nav ul ul a{padding-left:24px}nav ul ul li{margin:0}nav ul ul li:first-child{margin-top:0}nav ul ul li:last-child{margin-bottom:0}nav>div>div>ul>li:first-child>a{border-top:none}.preload *{transition:none !important}.pull-left{float:left}.pull-right{float:right}.badge{display:inline-block;float:right;min-width:10px;min-height:14px;padding:3px 7px;font-size:12px;color:#000;background-color:#f2f2f2;border-radius:10px;margin:-2px 0}.badge.get{color:#70bbe1;background-color:#d9edf7}.badge.head{color:#70bbe1;background-color:#d9edf7}.badge.options{color:#70bbe1;background-color:#d9edf7}.badge.put{color:#f0db70;background-color:#fcf8e3}.badge.patch{color:#f0db70;background-color:#fcf8e3}.badge.post{color:#93cd7c;background-color:#dff0d8}.badge.delete{color:#ce8383;background-color:#f2dede}.collapse-button{float:right}.collapse-button .close{display:none;color:#428bca;cursor:pointer}.collapse-button .open{color:#428bca;cursor:pointer}.collapse-button.show .close{display:inline}.collapse-button.show .open{display:none}.collapse-content{max-height:0;overflow:hidden;transition:max-height .3s ease-in-out}nav{width:220px}.container{max-width:940px;margin-left:auto;margin-right:auto}.container .row .content{margin-left:244px;width:696px}.container .row:after{content:'';display:block;clear:both}.container-fluid nav{width:22%}.container-fluid .row .content{margin-left:24%}.container-fluid.triple nav{width:16.5%;padding-right:1px}.container-fluid.triple .row .content{position:relative;margin-left:16.5%;padding-left:24px}.middle:before,.middle:after{content:'';display:table}.middle:after{clear:both}.middle{box-sizing:border-box;width:51.5%;padding-right:12px}.right{box-sizing:border-box;float:right;width:48.5%;padding-left:12px}.right a{color:#428bca}.right h1,.right h2,.right h3,.right h4,.right h5,.right p,.right div{color:white}.right pre{background-color:#1d1f21;border:1px solid #1d1f21}.right pre code{color:#c5c8c6}.right .description{margin-top:12px}.triple .resource-heading{font-size:125%}.definition{margin-top:12px;margin-bottom:12px}.definition .method{font-weight:bold}.definition .method.get{color:#2e8ab8}.definition .method.head{color:#2e8ab8}.definition .method.options{color:#2e8ab8}.definition .method.post{color:#56b82e}.definition .method.put{color:#b8a22e}.definition .method.patch{color:#b8a22e}.definition .method.delete{color:#b82e2e}.definition .uri{word-break:break-all;word-wrap:break-word}.definition .hostname{opacity:.5}.example-names{background-color:#eee;padding:12px;border-radius:6px}.example-names .tab-button{cursor:pointer;color:black;border:1px solid #ddd;padding:6px;margin-left:12px}.example-names .tab-button.active{background-color:#d5d5d5}.right .example-names{background-color:#444}.right .example-names .tab-button{color:white;border:1px solid #666;border-radius:6px}.right .example-names .tab-button.active{background-color:#5e5e5e}#nav-background{position:fixed;left:0;top:0;bottom:0;width:16.5%;padding-right:14.4px;background-color:#fbfbfb;border-right:1px solid #f0f0f0;z-index:-1}#right-panel-background{position:absolute;right:-12px;top:-12px;bottom:-12px;width:48.6%;background-color:#333;z-index:-1}@media (max-width:1200px){nav{width:198px}.container{max-width:840px}.container .row .content{margin-left:224px;width:606px}}@media (max-width:992px){nav{width:169.4px}.container{max-width:720px}.container .row .content{margin-left:194px;width:526px}}@media (max-width:768px){nav{display:none}.container{width:95%;max-width:none}.container .row .content,.container-fluid .row .content,.container-fluid.triple .row .content{margin-left:auto;margin-right:auto;width:95%}#nav-background{display:none}#right-panel-background{width:48.6%}}.back-to-top{position:fixed;z-index:1;bottom:0;right:24px;padding:4px 8px;color:rgba(0,0,0,0.5);background-color:#f2f2f2;text-decoration:none !important;border-top:1px solid #d9d9d9;border-left:1px solid #d9d9d9;border-right:1px solid #d9d9d9;border-top-left-radius:3px;border-top-right-radius:3px}.resource-group{padding:12px;margin-bottom:12px;background-color:white;border:1px solid #d9d9d9;border-radius:6px}.resource-group h2.group-heading,.resource-group .heading a{padding:12px;margin:-12px -12px 12px -12px;background-color:#f2f2f2;border-bottom:1px solid #d9d9d9;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.triple .content .resource-group{padding:0;border:none}.triple .content .resource-group h2.group-heading,.triple .content .resource-group .heading a{margin:0 0 12px 0;border:1px solid #d9d9d9}nav .resource-group .heading a{padding:12px;margin-bottom:0}nav .resource-group .collapse-content{padding:0}.action{margin-bottom:12px;padding:12px 12px 0 12px;overflow:hidden;border:1px solid transparent;border-radius:6px}.action h4.action-heading{padding:6px 12px;margin:-12px -12px 12px -12px;border-bottom:1px solid transparent;border-top-left-radius:6px;border-top-right-radius:6px;overflow:hidden}.action h4.action-heading .name{float:right;font-weight:normal;padding:6px 0}.action h4.action-heading .method{padding:6px 12px;margin-right:12px;border-radius:3px;display:inline-block}.action h4.action-heading .method.get{color:#fff;background-color:#337ab7}.action h4.action-heading .method.head{color:#fff;background-color:#337ab7}.action h4.action-heading .method.options{color:#fff;background-color:#337ab7}.action h4.action-heading .method.put{color:#fff;background-color:#ed9c28}.action h4.action-heading .method.patch{color:#fff;background-color:#ed9c28}.action h4.action-heading .method.post{color:#fff;background-color:#5cb85c}.action h4.action-heading .method.delete{color:#fff;background-color:#d9534f}.action h4.action-heading code{color:#444;background-color:#f5f5f5;border-color:#cfcfcf;font-weight:normal;word-break:break-all;display:inline-block;margin-top:2px}.action dl.inner{padding-bottom:2px}.action .title{border-bottom:1px solid white;margin:0 -12px -1px -12px;padding:12px}.action.get{border-color:#bce8f1}.action.get h4.action-heading{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.head{border-color:#bce8f1}.action.head h4.action-heading{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.options{border-color:#bce8f1}.action.options h4.action-heading{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.post{border-color:#d6e9c6}.action.post h4.action-heading{color:#5cb85c;background:#dff0d8;border-bottom-color:#d6e9c6}.action.put{border-color:#faebcc}.action.put h4.action-heading{color:#ed9c28;background:#fcf8e3;border-bottom-color:#faebcc}.action.patch{border-color:#faebcc}.action.patch h4.action-heading{color:#ed9c28;background:#fcf8e3;border-bottom-color:#faebcc}.action.delete{border-color:#ebccd1}.action.delete h4.action-heading{color:#d9534f;background:#f2dede;border-bottom-color:#ebccd1}</style></head><body class="preload"><a href="#top" class="text-muted back-to-top"><i class="fa fa-toggle-up"></i>&nbsp;Back to top</a><div class="container-fluid"><div class="row"><nav><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#transactions">Transactions</a></div><div class="collapse-content"><ul><li><a href="#transactions-transaction-skeleton-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a new unsigned transaction</a></li><li><a href="#transactions-transactions-post"><span class="badge post"><i class="fa fa-plus"></i></span>Send transaction</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#queries">Queries</a></div><div class="collapse-content"><ul><li><a href="#queries-transaction-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get Transaction</a></li><li><a href="#queries-sofa-payment-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get Transaction</a></li><li><a href="#queries-get-address-balance-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get Balance</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#notifications">Notifications</a></div><div class="collapse-content"><ul><li><a href="#notifications-register-for-apple-push-notifications-post"><span class="badge post"><i class="fa fa-plus"></i></span>APN Registration</a></li><li><a href="#notifications-register-for-google-push-notifications-post"><span class="badge post"><i class="fa fa-plus"></i></span>GCM Registration</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#utils">Utils</a></div><div class="collapse-content"><ul><li><a href="#utils-timestamp-generation-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get Timestamp</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#websocket-connections">Websocket connections</a></div><div class="collapse-content"><ul><li><a href="#websocket-connections-connect-to-websocket-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Connect</a></li><li><a href="#websocket-connections-deregister-apple-push-notifications-post"><span class="badge post"><i class="fa fa-plus"></i></span>APN Deregistration</a></li><li><a href="#websocket-connections-deregister-google-cloud-messaging-post"><span class="badge post"><i class="fa fa-plus"></i></span>GCM Deregistration</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#json-rpc-methods">JSON-RPC methods</a></div><div class="collapse-content"><ul><li><a href="#header-get-balance-">Get Balance </a></li><li><a href="#header-create-transaction-skeleton-">Create Transaction Skeleton </a></li><li><a href="#header-send-transaction-">Send Transaction </a></li><li><a href="#header-transaction-subscriptions">Transaction Subscriptions</a></li><li><a href="#header-subscribe-">Subscribe </a></li><li><a href="#header-unsubscribe-">Unsubscribe </a></li><li><a href="#header-list-subscriptions-">List Subscriptions </a></li></ul></div></div><p style="text-align: center; word-wrap: break-word;"><a href="https://ethereum.service.tokenbrowser.com">https://ethereum.service.tokenbrowser.com</a></p></nav><div class="content"><header><h1 id="top">Toshi Ethereum Service</h1></header><p>This service is a light service that sits ontop of a standard ethereum node and provides helper functions for creating and sending transactions.</p>
<section id="transactions" class="resource-group"><h2 class="group-heading">Transactions <a href="#transactions" class="permalink">&para;</a></h2><div id="transactions-transaction-skeleton" class="resource"><h3 class="resource-heading">Transaction Skeleton <a href="#transactions-transaction-skeleton" class="permalink">&nbsp;&para;</a></h3><p>This endpoint creates an unsigned transaction and returns the rlp encoded data back to the caller.</p>
<p>Optionally the caller can provide a <code>none</code>, <code>gas</code> and <code>gasPrice</code> values to override the defaults.</p>
<p>Note: A <code>nonce</code> for the transaction is picked based on the next available nonce for the given source address,
so it is important that the same address is used to sign the returned skeleton.</p>
<div id="transactions-transaction-skeleton-post" class="action post"><h4 class="action-heading"><div class="name">Create a new unsigned transaction</div><a href="#transactions-transaction-skeleton-post" class="method post">POST</a><code class="uri">/v1/tx/skel</code></h4><h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/tx/skel</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span></span>,
  "<span class="hljs-attribute">to</span>": <span class="hljs-value"><span class="hljs-string">"0xdb089a4f9a8c5f17040b4fc51647e942b5fc601d"</span></span>,
  "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-number">1000000000000000000</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span></span>,
    "<span class="hljs-attribute">to</span>": <span class="hljs-value"><span class="hljs-string">"0xdb089a4f9a8c5f17040b4fc51647e942b5fc601d"</span></span>,
    "<span class="hljs-attribute">gas</span>": <span class="hljs-value"><span class="hljs-number">25000</span></span>,
    "<span class="hljs-attribute">gasPrice</span>": <span class="hljs-value"><span class="hljs-number">20000000000</span></span>,
    "<span class="hljs-attribute">nonce</span>": <span class="hljs-value"><span class="hljs-number">1</span>
    <span class="hljs-string">"value"</span>: <span class="hljs-number">1000000000000000000</span></span>,
"<span class="hljs-attribute">data</span>": <span class="hljs-value"><span class="hljs-string">"0xffffffff"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">tx</span>": <span class="hljs-value"><span class="hljs-string">"0xec831002e88504a817c80082520894db089a4f9a8c5f17040b4fc51647e942b5fc601d880de0b6b3a764000080"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="transactions-transactions" class="resource"><h3 class="resource-heading">Transactions <a href="#transactions-transactions" class="permalink">&nbsp;&para;</a></h3><div id="transactions-transactions-post" class="action post"><h4 class="action-heading"><div class="name">Send transaction</div><a href="#transactions-transactions-post" class="method post">POST</a><code class="uri">/v1/tx</code></h4><p>This has two different options. It either accepts the same transaction hash returned by the skeleton generation endpoint as well as the signature to authorise that, or it can simply accept an rlp encoded signed transaction. Additionally a request can be signed, this is required if itâ€™s desired that the recipient of the transaction should know who (i.e. which toshi identity) the transaction has originated from.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/tx</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">tx</span>": <span class="hljs-value"><span class="hljs-string">"0xec831002e88504a817c80082520894db089a4f9a8c5f17040b4fc51647e942b5fc601d880de0b6b3a764000080"</span></span>,
  "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"0x09dd3b801d027a8e3b53b2f7d5b6753e5cd785c08d2d5bea41ed6226bddca9e32a5a35544647c1f9441ea888fa41dac20fc9db0805a1f94f3124a3e132eb7b8001"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">tx</span>": <span class="hljs-value"><span class="hljs-string">"0xf86f831002e88504a817c80082520894db089a4f9a8c5f17040b4fc51647e942b5fc601d880de0b6b3a7640000801ca009dd3b801d027a8e3b53b2f7d5b6753e5cd785c08d2d5bea41ed6226bddca9e3a02a5a35544647c1f9441ea888fa41dac20fc9db0805a1f94f3124a3e132eb7b80"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Toshi-ID-Address</span>: <span class="hljs-string">0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a</span><br><span class="hljs-attribute">Toshi-Signature</span>: <span class="hljs-string">0xc39a479a92fe8d626324ff82a33684610ecd6b50714f59542a1ea558220ec6246a9193dd481078417b3b44d55933989587459d3dd50295d4da67d6580ac8646801</span><br><span class="hljs-attribute">Toshi-Timestamp</span>: <span class="hljs-string">1480077346</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">tx</span>": <span class="hljs-value"><span class="hljs-string">"0xf86f831002e88504a817c80082520894db089a4f9a8c5f17040b4fc51647e942b5fc601d880de0b6b3a7640000801ca009dd3b801d027a8e3b53b2f7d5b6753e5cd785c08d2d5bea41ed6226bddca9e3a02a5a35544647c1f9441ea888fa41dac20fc9db0805a1f94f3124a3e132eb7b80"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">tx_hash</span>": <span class="hljs-value"><span class="hljs-string">"0xfde977a1ebd89cb3d0f17ce85efedca087788ddb50576c9b976c46f2eba21465"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"invalid_signature"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Invalid Signature"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"insufficient_funds"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Insufficient Funds"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="queries" class="resource-group"><h2 class="group-heading">Queries <a href="#queries" class="permalink">&para;</a></h2><div id="queries-transaction" class="resource"><h3 class="resource-heading">Transaction <a href="#queries-transaction" class="permalink">&nbsp;&para;</a></h3><div id="queries-transaction-get" class="action get"><h4 class="action-heading"><div class="name">Get Transaction</div><a href="#queries-transaction-get" class="method get">GET</a><code class="uri">/v1/tx/{tx_hash}</code></h4><p>Returns the details of a transaction.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/tx/<span class="hljs-attribute" title="tx_hash">tx_hash</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>tx_hash</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Transaction hash</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">transactionIndex</span>": <span class="hljs-value"><span class="hljs-string">"0x00"</span></span>,
    "<span class="hljs-attribute">raw</span>": <span class="hljs-value"><span class="hljs-string">"0xf86c831000008504a817c80082520894056db290f8ba3250ca64a45d16284d04bc6f5fbf8502540be400801ca0114655db4898a6580f0abfc53fc0c0a88110724abf8d41f2abf206c69d7d4c82a01ed2cdf6939484ef6aebc39ce5662363b82140106bbc374a0f1381b6948214b0"</span></span>,
    "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"0x"</span></span>,
    "<span class="hljs-attribute">nonce</span>": <span class="hljs-value"><span class="hljs-string">"0x100000"</span></span>,
    "<span class="hljs-attribute">gas</span>": <span class="hljs-value"><span class="hljs-string">"0x5208"</span></span>,
    "<span class="hljs-attribute">blockHash</span>": <span class="hljs-value"><span class="hljs-string">"0xfc6e2a636c945fb3eade5d180e99bc1969480b522c2dde5727677dbac9594863"</span></span>,
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"0x02540be400"</span></span>,
    "<span class="hljs-attribute">gasPrice</span>": <span class="hljs-value"><span class="hljs-string">"0x04a817c800"</span></span>,
    "<span class="hljs-attribute">creates</span>": <span class="hljs-value">None</span>,
    "<span class="hljs-attribute">blockNumber</span>": <span class="hljs-value"><span class="hljs-string">"0x01"</span></span>,
    "<span class="hljs-attribute">to</span>": <span class="hljs-value"><span class="hljs-string">"0x056db290f8ba3250ca64a45d16284d04bc6f5fbf"</span></span>,
    "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"0xde3d2d9dd52ea80f7799ef4791063a5458d13913"</span></span>,
    "<span class="hljs-attribute">hash</span>": <span class="hljs-value"><span class="hljs-string">"0x2f321aa116146a9bc62b61c76508295f708f42d56340c9e613ebfc27e33f240c"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"not_found"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Not Found"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="queries-sofa-payment" class="resource"><h3 class="resource-heading">SOFA Payment <a href="#queries-sofa-payment" class="permalink">&nbsp;&para;</a></h3><div id="queries-sofa-payment-get" class="action get"><h4 class="action-heading"><div class="name">Get Transaction</div><a href="#queries-sofa-payment-get" class="method get">GET</a><code class="uri">/v1/tx/{tx_hash}?format=sofa</code></h4><p>Returns the details of a transaction as a SOFA message.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/tx/<span class="hljs-attribute" title="tx_hash">tx_hash</span>?format=sofa</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>tx_hash</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Transaction hash</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>SOFA::Payment:{
    <span class="hljs-string">"value"</span>: <span class="hljs-string">"0x02540be400"</span>,
    <span class="hljs-string">"toAddress"</span>: <span class="hljs-string">"0x056db290f8ba3250ca64a45d16284d04bc6f5fbf"</span>,
    <span class="hljs-string">"fromAddress"</span>: <span class="hljs-string">"0xde3d2d9dd52ea80f7799ef4791063a5458d13913"</span>,
    <span class="hljs-string">"txHash"</span>: <span class="hljs-string">"0x2f321aa116146a9bc62b61c76508295f708f42d56340c9e613ebfc27e33f240c"</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"not_found"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Not Found"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="queries-get-address-balance" class="resource"><h3 class="resource-heading">Get Address Balance <a href="#queries-get-address-balance" class="permalink">&nbsp;&para;</a></h3><div id="queries-get-address-balance-get" class="action get"><h4 class="action-heading"><div class="name">Get Balance</div><a href="#queries-get-address-balance-get" class="method get">GET</a><code class="uri">/v1/balance/{address}</code></h4><p>Returns the balance of the given address. Two values are returned, <code>confirmed_balance</code> is the balance of the address that has been confirmed by the ethereum network. <code>unconfirmed_balance</code> is the confirmed balance plus or minus the value (as well as estimated fees for outgoing transactions) for any pending transactions that have yet to be confirmed by the network.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/balance/<span class="hljs-attribute" title="address">address</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>address</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>Ethereum address</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">confirmed_balance</span>": <span class="hljs-value"><span class="hljs-string">"0x2b4cf2cc8a310"</span></span>,
  "<span class="hljs-attribute">unconfirmed_balance</span>": <span class="hljs-value"><span class="hljs-string">"0x2b4cf2cc8a310"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="notifications" class="resource-group"><h2 class="group-heading">Notifications <a href="#notifications" class="permalink">&para;</a></h2><div id="notifications-register-for-apple-push-notifications" class="resource"><h3 class="resource-heading">Register for apple push notifications <a href="#notifications-register-for-apple-push-notifications" class="permalink">&nbsp;&para;</a></h3><div id="notifications-register-for-apple-push-notifications-post" class="action post"><h4 class="action-heading"><div class="name">APN Registration</div><a href="#notifications-register-for-apple-push-notifications-post" class="method post">POST</a><code class="uri">/v1/apn/register</code></h4><p>Register for APN push notifications. This links a toshi identity to a push notification toshi and an ethereum address. This will enable push notifications for the given addresses. If no address is given, this will default to the toshi id.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/apn/register</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Toshi-ID-Address</span>: <span class="hljs-string">0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a</span><br><span class="hljs-attribute">Toshi-Signature</span>: <span class="hljs-string">0xc39a479a92fe8d626324ff82a33684610ecd6b50714f59542a1ea558220ec6246a9193dd481078417b3b44d55933989587459d3dd50295d4da67d6580ac8646801</span><br><span class="hljs-attribute">Toshi-Timestamp</span>: <span class="hljs-string">1480077346</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">registration_id</span>": <span class="hljs-value"><span class="hljs-string">"64be4fe95ba967bb533f0c240325942b9e1f881b5cd2982568a305dd4933e0bd"</span></span>,
  "<span class="hljs-attribute">address</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"invalid_signature"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Invalid Signature"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"invalid_timestamp"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"The difference between the timestamp and the current time is too large"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"missing_arguments"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Missing arguments"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div><div id="notifications-register-for-google-push-notifications" class="resource"><h3 class="resource-heading">Register for google push notifications <a href="#notifications-register-for-google-push-notifications" class="permalink">&nbsp;&para;</a></h3><div id="notifications-register-for-google-push-notifications-post" class="action post"><h4 class="action-heading"><div class="name">GCM Registration</div><a href="#notifications-register-for-google-push-notifications-post" class="method post">POST</a><code class="uri">/v1/gcm/register</code></h4><p>Register for Google Cloud Messaging push notifications. This links a toshi identity to a push notification toshi and an ethereum address. This will enable push notifications for the given addresses. If no address is given, this will default to the toshi id.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/gcm/register</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Toshi-ID-Address</span>: <span class="hljs-string">0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a</span><br><span class="hljs-attribute">Toshi-Signature</span>: <span class="hljs-string">0xc39a479a92fe8d626324ff82a33684610ecd6b50714f59542a1ea558220ec6246a9193dd481078417b3b44d55933989587459d3dd50295d4da67d6580ac8646801</span><br><span class="hljs-attribute">Toshi-Timestamp</span>: <span class="hljs-string">1480077346</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">registration_id</span>": <span class="hljs-value"><span class="hljs-string">"64be4fe95ba967bb533f0c240325942b9e1f881b5cd2982568a305dd4933e0bd"</span></span>,
  "<span class="hljs-attribute">address</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"invalid_signature"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Invalid Signature"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"invalid_timestamp"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"The difference between the timestamp and the current time is too large"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"missing_arguments"</span></span>,
      "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Missing arguments"</span>
    </span>}
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="utils" class="resource-group"><h2 class="group-heading">Utils <a href="#utils" class="permalink">&para;</a></h2><div id="utils-timestamp-generation" class="resource"><h3 class="resource-heading">Timestamp generation <a href="#utils-timestamp-generation" class="permalink">&nbsp;&para;</a></h3><p>Used to retrieve a current timestamp from the server for use in signing other requests.</p>
<div id="utils-timestamp-generation-get" class="action get"><h4 class="action-heading"><div class="name">Get Timestamp</div><a href="#utils-timestamp-generation-get" class="method get">GET</a><code class="uri">/v1/timestamp</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/timestamp</span></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">timestamp</span>": <span class="hljs-value"><span class="hljs-number">1481291348</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="websocket-connections" class="resource-group"><h2 class="group-heading">Websocket connections <a href="#websocket-connections" class="permalink">&para;</a></h2><p>All the above endpoints can be accessed through a websocket based json-rpc interface.</p>
<div id="websocket-connections-connect-to-websocket" class="resource"><h3 class="resource-heading">Connect to websocket <a href="#websocket-connections-connect-to-websocket" class="permalink">&nbsp;&para;</a></h3><div id="websocket-connections-connect-to-websocket-get" class="action get"><h4 class="action-heading"><div class="name">Connect</div><a href="#websocket-connections-connect-to-websocket-get" class="method get">GET</a><code class="uri">/v1/ws</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/ws</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Upgrade</span>: <span class="hljs-string">websocket</span><br><span class="hljs-attribute">Connection</span>: <span class="hljs-string">Upgrade</span><br><span class="hljs-attribute">Sec-WebSocket-Key</span>: <span class="hljs-string">YcwVhryr7tewuz3a7XAs8Q==</span><br><span class="hljs-attribute">Sec-WebSocket-Version</span>: <span class="hljs-string">13</span><br><span class="hljs-attribute">Toshi-ID-Address</span>: <span class="hljs-string">0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a</span><br><span class="hljs-attribute">Toshi-Signature</span>: <span class="hljs-string">0xc39a479a92fe8d626324ff82a33684610ecd6b50714f59542a1ea558220ec6246a9193dd481078417b3b44d55933989587459d3dd50295d4da67d6580ac8646801</span><br><span class="hljs-attribute">Toshi-Timestamp</span>: <span class="hljs-string">1480077346</span></code></pre><div style="height: 1px;"></div></div></div></div></div><div id="websocket-connections-deregister-apple-push-notifications" class="resource"><h3 class="resource-heading">Deregister apple push notifications <a href="#websocket-connections-deregister-apple-push-notifications" class="permalink">&nbsp;&para;</a></h3><div id="websocket-connections-deregister-apple-push-notifications-post" class="action post"><h4 class="action-heading"><div class="name">APN Deregistration</div><a href="#websocket-connections-deregister-apple-push-notifications-post" class="method post">POST</a><code class="uri">/v1/apn/deregister</code></h4><p>Deregister the given address from the given registration_id. If no address is given, all addresses matching the registration id will be deregistered.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/apn/deregister</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Toshi-ID-Address</span>: <span class="hljs-string">0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a</span><br><span class="hljs-attribute">Toshi-Signature</span>: <span class="hljs-string">0xc39a479a92fe8d626324ff82a33684610ecd6b50714f59542a1ea558220ec6246a9193dd481078417b3b44d55933989587459d3dd50295d4da67d6580ac8646801</span><br><span class="hljs-attribute">Toshi-Timestamp</span>: <span class="hljs-string">1480077346</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">registration_id</span>": <span class="hljs-value"><span class="hljs-string">"64be4fe95ba967bb533f0c240325942b9e1f881b5cd2982568a305dd4933e0bd"</span></span>,
  "<span class="hljs-attribute">address</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong></div></div></div><div id="websocket-connections-deregister-google-cloud-messaging" class="resource"><h3 class="resource-heading">Deregister Google Cloud Messaging <a href="#websocket-connections-deregister-google-cloud-messaging" class="permalink">&nbsp;&para;</a></h3><div id="websocket-connections-deregister-google-cloud-messaging-post" class="action post"><h4 class="action-heading"><div class="name">GCM Deregistration</div><a href="#websocket-connections-deregister-google-cloud-messaging-post" class="method post">POST</a><code class="uri">/v1/gcm/deregister</code></h4><p>Deregister the given address from the given registration_id. If no address is given, all addresses matching the registration id will be deregistered.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">https://ethereum.service.tokenbrowser.com</span>/v1/gcm/deregister</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Toshi-ID-Address</span>: <span class="hljs-string">0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a</span><br><span class="hljs-attribute">Toshi-Signature</span>: <span class="hljs-string">0xc39a479a92fe8d626324ff82a33684610ecd6b50714f59542a1ea558220ec6246a9193dd481078417b3b44d55933989587459d3dd50295d4da67d6580ac8646801</span><br><span class="hljs-attribute">Toshi-Timestamp</span>: <span class="hljs-string">1480077346</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">registration_id</span>": <span class="hljs-value"><span class="hljs-string">"64be4fe95ba967bb533f0c240325942b9e1f881b5cd2982568a305dd4933e0bd"</span></span>,
  "<span class="hljs-attribute">address</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong></div></div></div></section><section id="json-rpc-methods" class="resource-group"><h2 class="group-heading">JSON-RPC methods <a href="#json-rpc-methods" class="permalink">&para;</a></h2><h2 id="header-get-balance-">Get Balance <code>get_balance</code> <a class="permalink" href="#header-get-balance-" aria-hidden="true">Â¶</a></h2>
<p>Requests the given addressâ€™s balance.</p>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"get_balance"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">[<span class="hljs-string">"0x39bf9e501e61440b4b268d7b2e9aa2458dd201bb"</span>]
</span>}</code></pre>
<p><strong>Response</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">result</span>": <span class="hljs-value">{
         "<span class="hljs-attribute">confirmed_balance</span>": <span class="hljs-value"><span class="hljs-string">"0x2b4cf2cc8a310"</span></span>,
         "<span class="hljs-attribute">unconfirmed_balance</span>": <span class="hljs-value"><span class="hljs-string">"0x2b4cf2cc8a310"</span>
    </span>}
</span>}</code></pre>
<h2 id="header-create-transaction-skeleton-">Create Transaction Skeleton <code>create_transaction_skeleton</code> <a class="permalink" href="#header-create-transaction-skeleton-" aria-hidden="true">Â¶</a></h2>
<p>Creates an unsigned transaction with the the given arguments, using network defaults for the optional arguments and the network nonce from the given <code>from</code> address. Responds with the rlp encoded transaction.</p>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"create_transaction_skeleton"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span></span>,
        "<span class="hljs-attribute">to</span>": <span class="hljs-value"><span class="hljs-string">"0xdb089a4f9a8c5f17040b4fc51647e942b5fc601d"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-number">1000000000000000000</span>
    </span>}
</span>}</code></pre>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"create_transaction_skeleton"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"0x676f7cb80c9ff6a55e8992d94bac9a3212282c3a"</span></span>,
        "<span class="hljs-attribute">to</span>": <span class="hljs-value"><span class="hljs-string">"0xdb089a4f9a8c5f17040b4fc51647e942b5fc601d"</span>
        <span class="hljs-string">"gas"</span>: <span class="hljs-number">25000</span></span>,
        "<span class="hljs-attribute">gas_price</span>": <span class="hljs-value"><span class="hljs-number">20000000000</span></span>,
        "<span class="hljs-attribute">nonce</span>": <span class="hljs-value"><span class="hljs-string">"0x10000"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-number">1000000000000000000</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value"><span class="hljs-string">"0xffffffff"</span>
    </span>}
</span>}</code></pre>
<p><strong>Response</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">result</span>": <span class="hljs-value">[<span class="hljs-string">"0xec831002e88504a817c80082520894db089a4f9a8c5f17040b4fc51647e942b5fc601d880de0b6b3a764000080"</span>]
</span>}</code></pre>
<h2 id="header-send-transaction-">Send Transaction <code>send_transaction</code> <a class="permalink" href="#header-send-transaction-" aria-hidden="true">Â¶</a></h2>
<p>Sends a signed transaction to the network. Responds with the transactionâ€™s hash.</p>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"send_transaction"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">tx</span>": <span class="hljs-value"><span class="hljs-string">"0xec831002e88504a817c80082520894db089a4f9a8c5f17040b4fc51647e942b5fc601d880de0b6b3a764000080"</span>
    </span>}
</span>}</code></pre>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"send_transaction"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">tx</span>": <span class="hljs-value"><span class="hljs-string">"0xec831002e88504a817c80082520894db089a4f9a8c5f17040b4fc51647e942b5fc601d880de0b6b3a764000080"</span></span>,
        "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"0x09dd3b801d027a8e3b53b2f7d5b6753e5cd785c08d2d5bea41ed6226bddca9e32a5a35544647c1f9441ea888fa41dac20fc9db0805a1f94f3124a3e132eb7b8001"</span>
    </span>}
</span>}</code></pre>
<p><strong>Response</strong></p>
<pre><code>{
   "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">result</span>": <span class="hljs-value">[<span class="hljs-string">"0xfde977a1ebd89cb3d0f17ce85efedca087788ddb50576c9b976c46f2eba21465"</span>]
</span>}</code></pre>
<h1 id="header-transaction-subscriptions">Transaction Subscriptions <a class="permalink" href="#header-transaction-subscriptions" aria-hidden="true">Â¶</a></h1>
<p>Similar to the registrations for push notifications for new transactions sent to/from an address.</p>
<p>The core difference being that the subscriptions made during the lifetime of the websocket only exists until the websocket is closed. Upon reconnection, a websocket client needs to re-subscribe for any addresses itâ€™s interested in.</p>
<p>Notifications are sent as JSON-RPC notifications with the method <code>subscriptions</code>.</p>
<p>e.g.</p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"subscription"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">subscription</span>": <span class="hljs-value"><span class="hljs-string">"0x85h43d8a49eeb85d32cf465507dd71d507100c1"</span></span>,
        "<span class="hljs-attribute">transaction</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">hash</span>": <span class="hljs-value"><span class="hljs-string">"0xc6ef2fc5426d6ad6fd9e2a26abeab0aa2411b7ab17f30a99d3cb96aed1d1055b"</span></span>,
            "<span class="hljs-attribute">nonce</span>": <span class="hljs-value"><span class="hljs-string">"0x"</span></span>,
            "<span class="hljs-attribute">blockHash</span>": <span class="hljs-value"><span class="hljs-string">"0xbeab0aa2411b7ab17f30a99d3cb9c6ef2fc5426d6ad6fd9e2a26a6aed1d1055b"</span></span>,
            "<span class="hljs-attribute">blockNumber</span>": <span class="hljs-value"><span class="hljs-string">"0x15df"</span></span>,
            "<span class="hljs-attribute">transactionIndex</span>": <span class="hljs-value"><span class="hljs-string">"0x1"</span></span>,
            "<span class="hljs-attribute">from</span>": <span class="hljs-value"><span class="hljs-string">"0x407d73d8a49eeb85d32cf465507dd71d507100c1"</span></span>,
            "<span class="hljs-attribute">to</span>": <span class="hljs-value"><span class="hljs-string">"0x85h43d8a49eeb85d32cf465507dd71d507100c1"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"0x7f110"</span>
            <span class="hljs-string">"gas"</span>: <span class="hljs-string">"0x7f110"</span>
            <span class="hljs-string">"gasPrice"</span>: <span class="hljs-string">"0x09184e72a000"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"0x603880600c6000396000f300603880600c6000396000f3603880600c6000396000f360"</span></span>,
        }</span>,
        "<span class="hljs-attribute">sender_toshi_id</span>": <span class="hljs-value"><span class="hljs-string">"0x39bf9e501e61440b4b268d7b2e9aa2458dd201bb"</span>
    </span>}
</span>}</code></pre>
<ul>
<li>
<p><code>subscription</code>: the subscribed address for which this notification was generated.</p>
</li>
<li>
<p><code>transaction</code>: the transaction details (the same as returned by the node, i.e. <a href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gettransactionbyhash">https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gettransactionbyhash</a>).</p>
</li>
<li>
<p><code>sender_toshi_id</code>: the toshi id address of the user whom sent the transaction (null if the transaction was sent anonymously).</p>
</li>
</ul>
<h2 id="header-subscribe-">Subscribe <code>subscribe</code> <a class="permalink" href="#header-subscribe-" aria-hidden="true">Â¶</a></h2>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"subscribe"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">[<span class="hljs-string">"0x39bf9e501e61440b4b268d7b2e9aa2458dd201bb"</span>]
</span>}</code></pre>
<p><strong>Response</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
</span>}</code></pre>
<h2 id="header-unsubscribe-">Unsubscribe <code>unsubscribe</code> <a class="permalink" href="#header-unsubscribe-" aria-hidden="true">Â¶</a></h2>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"unsubscribe"</span></span>,
    "<span class="hljs-attribute">params</span>": <span class="hljs-value">[<span class="hljs-string">"0x39bf9e501e61440b4b268d7b2e9aa2458dd201bb"</span>]
</span>}</code></pre>
<p><strong>Response</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
</span>}</code></pre>
<h2 id="header-list-subscriptions-">List Subscriptions <code>list_subscriptions</code> <a class="permalink" href="#header-list-subscriptions-" aria-hidden="true">Â¶</a></h2>
<p><strong>Request</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">method</span>": <span class="hljs-value"><span class="hljs-string">"list_subscriptions"</span>
</span>}</code></pre>
<p><strong>Response</strong></p>
<pre><code>{
    "<span class="hljs-attribute">jsonrpc</span>": <span class="hljs-value"><span class="hljs-string">"2.0"</span></span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">result</span>": <span class="hljs-value">[<span class="hljs-string">"0x39bf9e501e61440b4b268d7b2e9aa2458dd201bb"</span>]
</span>}</code></pre>
</section></div></div></div><p style="text-align: center;" class="text-muted">Generated by&nbsp;<a href="https://github.com/danielgtaylor/aglio" class="aglio">aglio</a>&nbsp;on 18 Jul 2017</p><script>/* eslint-env browser */
/* eslint quotes: [2, "single"] */
'use strict';

/*
  Determine if a string ends with another string.
*/
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

/*
  Get a list of direct child elements by class name.
*/
function childrenByClass(element, name) {
  var filtered = [];

  for (var i = 0; i < element.children.length; i++) {
    var child = element.children[i];
    var classNames = child.className.split(' ');
    if (classNames.indexOf(name) !== -1) {
      filtered.push(child);
    }
  }

  return filtered;
}

/*
  Get an array [width, height] of the window.
*/
function getWindowDimensions() {
  var w = window,
      d = document,
      e = d.documentElement,
      g = d.body,
      x = w.innerWidth || e.clientWidth || g.clientWidth,
      y = w.innerHeight || e.clientHeight || g.clientHeight;

  return [x, y];
}

/*
  Collapse or show a request/response example.
*/
function toggleCollapseButton(event) {
    var button = event.target.parentNode;
    var content = button.parentNode.nextSibling;
    var inner = content.children[0];

    if (button.className.indexOf('collapse-button') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
        // Currently showing, so let's hide it
        button.className = 'collapse-button';
        content.style.maxHeight = '0px';
    } else {
        // Currently hidden, so let's show it
        button.className = 'collapse-button show';
        content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

function toggleTabButton(event) {
    var i, index;
    var button = event.target;

    // Get index of the current button.
    var buttons = childrenByClass(button.parentNode, 'tab-button');
    for (i = 0; i < buttons.length; i++) {
        if (buttons[i] === button) {
            index = i;
            button.className = 'tab-button active';
        } else {
            buttons[i].className = 'tab-button';
        }
    }

    // Hide other tabs and show this one.
    var tabs = childrenByClass(button.parentNode.parentNode, 'tab');
    for (i = 0; i < tabs.length; i++) {
        if (i === index) {
            tabs[i].style.display = 'block';
        } else {
            tabs[i].style.display = 'none';
        }
    }
}

/*
  Collapse or show a navigation menu. It will not be hidden unless it
  is currently selected or `force` has been passed.
*/
function toggleCollapseNav(event, force) {
    var heading = event.target.parentNode;
    var content = heading.nextSibling;
    var inner = content.children[0];

    if (heading.className.indexOf('heading') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
      // Currently showing, so let's hide it, but only if this nav item
      // is already selected. This prevents newly selected items from
      // collapsing in an annoying fashion.
      if (force || window.location.hash && endsWith(event.target.href, window.location.hash)) {
        content.style.maxHeight = '0px';
      }
    } else {
      // Currently hidden, so let's show it
      content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Refresh the page after a live update from the server. This only
  works in live preview mode (using the `--server` parameter).
*/
function refresh(body) {
    document.querySelector('body').className = 'preload';
    document.body.innerHTML = body;

    // Re-initialize the page
    init();
    autoCollapse();

    document.querySelector('body').className = '';
}

/*
  Determine which navigation items should be auto-collapsed to show as many
  as possible on the screen, based on the current window height. This also
  collapses them.
*/
function autoCollapse() {
  var windowHeight = getWindowDimensions()[1];
  var itemsHeight = 64; /* Account for some padding */
  var itemsArray = Array.prototype.slice.call(
    document.querySelectorAll('nav .resource-group .heading'));

  // Get the total height of the navigation items
  itemsArray.forEach(function (item) {
    itemsHeight += item.parentNode.offsetHeight;
  });

  // Should we auto-collapse any nav items? Try to find the smallest item
  // that can be collapsed to show all items on the screen. If not possible,
  // then collapse the largest item and do it again. First, sort the items
  // by height from smallest to largest.
  var sortedItems = itemsArray.sort(function (a, b) {
    return a.parentNode.offsetHeight - b.parentNode.offsetHeight;
  });

  while (sortedItems.length && itemsHeight > windowHeight) {
    for (var i = 0; i < sortedItems.length; i++) {
      // Will collapsing this item help?
      var itemHeight = sortedItems[i].nextSibling.offsetHeight;
      if ((itemsHeight - itemHeight <= windowHeight) || i === sortedItems.length - 1) {
        // It will, so let's collapse it, remove its content height from
        // our total and then remove it from our list of candidates
        // that can be collapsed.
        itemsHeight -= itemHeight;
        toggleCollapseNav({target: sortedItems[i].children[0]}, true);
        sortedItems.splice(i, 1);
        break;
      }
    }
  }
}

/*
  Initialize the interactive functionality of the page.
*/
function init() {
    var i, j;

    // Make collapse buttons clickable
    var buttons = document.querySelectorAll('.collapse-button');
    for (i = 0; i < buttons.length; i++) {
        buttons[i].onclick = toggleCollapseButton;

        // Show by default? Then toggle now.
        if (buttons[i].className.indexOf('show') !== -1) {
            toggleCollapseButton({target: buttons[i].children[0]});
        }
    }

    var responseCodes = document.querySelectorAll('.example-names');
    for (i = 0; i < responseCodes.length; i++) {
        var tabButtons = childrenByClass(responseCodes[i], 'tab-button');
        for (j = 0; j < tabButtons.length; j++) {
            tabButtons[j].onclick = toggleTabButton;

            // Show by default?
            if (j === 0) {
                toggleTabButton({target: tabButtons[j]});
            }
        }
    }

    // Make nav items clickable to collapse/expand their content.
    var navItems = document.querySelectorAll('nav .resource-group .heading');
    for (i = 0; i < navItems.length; i++) {
        navItems[i].onclick = toggleCollapseNav;

        // Show all by default
        toggleCollapseNav({target: navItems[i].children[0]});
    }
}

// Initial call to set up buttons
init();

window.onload = function () {
    autoCollapse();
    // Remove the `preload` class to enable animations
    document.querySelector('body').className = '';
};
</script></body></html>